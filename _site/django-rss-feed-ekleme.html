<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Django RSS Feed Ekleme &middot; Ali GÖREN
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p></p>
    <img src="/images/ali.jpg" alt="my-photo">
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Anasayfa</a>

    

    
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/about">About Me</a>
        
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2017. Made with <span class="hearts">&hearts;</span> Jekyll
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Anasayfa">Ali GÖREN</a>
            <small>Açık Kaynak, JavaScript, Python, .NET</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="post post-detail">
  <h1 class="post-title">Django RSS Feed Ekleme</h1>
  <span class="post-date">28 Feb 2016</span>
  
    <div class="tag-container">
        Etiketler:
        
          <span class="tags" alt="python etiketine sahip yazılar" title="python etiketine sahip yazılar">python</span>
        
          <span class="tags" alt="django etiketine sahip yazılar" title="django etiketine sahip yazılar">django</span>
        
          <span class="tags" alt="rss etiketine sahip yazılar" title="rss etiketine sahip yazılar">rss</span>
        
    </div>
  
  <p>Django’da RSS Feed ekleme işlemi çok basittir. Uzun uzun anlatabilir miyim diye düşündüm ancak yine de başaramam herhalde. Öncelikle yapılması gerekenleri söylemek gerekiyor sanırım.
<!--more-->
Uygulamamız içerisine feeds.py dosyasını oluşturalım ( siz isterseniz mahmut.py deyin ) Oluşturma işlemini başarıyla yaptıysanız şimdi bu dosyanın içine sınıf oluşturmalıyız. Bunun için Django’nun <a href="https://docs.djangoproject.com/en/1.9/ref/contrib/syndication/">Feed Framework</a>‘ünü çağırmak gerekiyor. Bir de slug yani url için de core kütüphanesinde bulunan reverse() işlevini çağıralım.</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.contrib.syndication.views</span> <span class="kn">import</span> <span class="n">Feed</span>
<span class="kn">from</span> <span class="nn">django.core.urlresolvers</span> <span class="kn">import</span> <span class="n">reverse</span>
</code></pre>
</div>

<p>Bu işlemden sonra da RSS beslemesi olarak alacağımız modeli çağıralım. Benim çalışmamda RSS beslemesi yazdığım blogum için vardı. Blogdaki son yazıları gösterecekti. Post isimli modelimi de yine dahil ediyorum:</p>

<p><code class="highlighter-rouge">from .models import Post</code></p>

<p>Dahil etme işlemi başladıktan sonra PostFeed adında bir sınıf oluşturup, bu sınıfa daha önce import ettiğim Feed sınıfından miras almasını söylüyorum. Böylece Feed sınıfının özelliklerini kendi PostFeed sınıfımda kullanabileceğim. Kısacası şöyle bir giriş olacak:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">PostsFeed</span><span class="p">(</span><span class="n">Feed</span><span class="p">):</span>
   <span class="o">...</span>
</code></pre>
</div>

<p>Eh madem sınıfa bir giriş yaptık o zaman bu sınıfa dair bazı özellikleri, işlevleri kullanalım. Belirtmem gereken bazı şeyler var.</p>

<p>title değişkeni RSS feed sayfanızda başlığı gösteriyor. Hem h1 tagleri arasında hem de tarayıcı başlığında görünen kısımdır. O zaman sınıfımızı şöyle değerlendirelim:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">PostsFeed</span><span class="p">(</span><span class="n">Feed</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">"Ali GÖREN"</span>
</code></pre>
</div>

<p>Tüm işlemler bitince buradaki adımları kaynak kodlara bakıp görebilirsiniz. Neyse devam edelim:</p>

<p>link değişkeni site linkini gösteriyor. Bu link tagleri arasında görünen link. Örneğin http://localhost/link-degiskeni gibi düşünebiliriz. O zaman sınıfımızı biraz daha ilerletelim:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">PostsFeed</span><span class="p">(</span><span class="n">Feed</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">"Ali GÖREN"</span>
    <span class="n">link</span> <span class="o">=</span> <span class="s">"/"</span>
</code></pre>
</div>

<p>Şimdi geldik en önemli noktaya. Açıklama kısmına. RSS belgelerine göre, RSS sayfaları için bir de açıklama kısmı olması gerekiyor. O zaman biz de bu doğrultuda description değişkenini kullanarak sınıfımızı geliştirelim:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">PostsFeed</span><span class="p">(</span><span class="n">Feed</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="o">...</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s">"Bu Feed ya da Site Açıklaması Olabilir"</span>
</code></pre>
</div>

<p>Üst kısımları tekrar tekrar vermemek için üç nokta koyuyorum oralara. Şimdilik gördüğümüz üç element gerekli olan elementlerdi. İsterseniz feed_type ya da feed_copyright gibi özellikleri de kullanabilirsiniz. Her şey iyi hoş ama bu işlemler bize içerikleri getirmiyor. Evet şimdi artık Feed sınıfının işlevlerini yani fonksiyonlarını kullanabiliriz. Öncelikle tüm içerikleri çekelim. Bu içerikleri views.py dosyasındaki gibi çekiyoruz.</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">PostsFeed</span><span class="p">(</span><span class="n">Feed</span><span class="p">):</span>
    <span class="o">...</span>


    <span class="k">def</span> <span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">all</span><span class="p">()</span>
</code></pre>
</div>

<p>Buradaki <strong>items()</strong> işlevi Feed classını miras almamızdan dolayı geliyor. Daha sonra return ettiği bilgi ise Post modelimizde de belirttiğimiz içeriklerdir. Tıpkı bir views.py içinde oluşturulan işlevdeki çalışma gibi düşünelim. Buraya kadar güzel ancak henüz herhangi bir şekilde yine başlık, içerik vs. görüntüleyemiyoruz. Bunun için diğer işlevleri de kullanmalıyız. Öncelikle item_title() işlevini kullanarak çekilen içeriğin başlığını gösterelim.</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">PostsFeed</span><span class="p">(</span><span class="n">Feed</span><span class="p">):</span>
    <span class="o">...</span>

    <span class="k">def</span> <span class="nf">item_title</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">item</span><span class="o">.</span><span class="n">title</span>
</code></pre>
</div>

<p>Görmüş olduğumuz gibi itemtitle işlevi de aldığı argümanın title özelliğini döndürüyor. Buradaki item.title’da title kısmı bizim modelimizde bulunan title’dır. Artık içeriklerin başlıklarını görebiliriz. Şimdi de <strong>itemdescription()</strong> işlevi ile içeriğin ( yazı olduğunu düşünüyoruz ) bir kısmını gösterelim:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">PostsFeed</span><span class="p">(</span><span class="n">Feed</span><span class="p">):</span>
    <span class="o">...</span>

    <span class="k">def</span> <span class="nf">item_description</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">item</span><span class="o">.</span><span class="n">content</span>
</code></pre>
</div>

<p>Yukarıdaki title kısmı için olan açıklamaların aynısını burası için de yapabilirim. Sadece bilmemiz gereken title ve content Post modelinden gelen değerler. Ayrıca eklemem gereken bir şey item* işlevler için return edilen değerlere HTML eklemesi yapabilirsiniz. Örneğin return item.content + “&lt;hr /&gt;” gibi. Şimdi son olarak da içeriğin URL’sini vermeliyiz. Bunun için <code class="highlighter-rouge">itemlink()</code> işlevini kullanacağız:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">PostsFeed</span><span class="p">(</span><span class="n">Feed</span><span class="p">):</span>
    <span class="o">...</span>

    <span class="k">def</span> <span class="nf">item_link</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s">"posts:detail"</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">"slug"</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">slug</span><span class="p">})</span>
</code></pre>
</div>

<p>Bu kısmı nasıl açıklayayım bilmiyorum ancak bunu yaparken Post gibi modelleriniz içerisinde getabsoluteurl() bulunması gerekebilir. kwars içerisindeki slug özelliğine denk gelen item.slug ise yine Post modelimizde belirtilen slug alanıdır. Son haliyle sınıfımıza bakalım:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">PostsFeed</span><span class="p">(</span><span class="n">Feed</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s">"Ali GÖREN"</span>
    <span class="n">link</span> <span class="o">=</span> <span class="s">"/"</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s">"Açıklama"</span>

    <span class="k">def</span> <span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="nb">all</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">item_title</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">item</span><span class="o">.</span><span class="n">title</span>

    <span class="k">def</span> <span class="nf">item_description</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">item</span><span class="o">.</span><span class="n">content</span>

    <span class="k">def</span> <span class="nf">item_link</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s">"posts:detail"</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">"slug"</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">slug</span><span class="p">})</span>
</code></pre>
</div>

<p>Sınıfımız hazır ancak bunu bir de URL olarak belirtmeliyiz ki feed adresine de erişebilelim. Bunun için uygulamamızın urls.py dosyasını açalım ve oluşturduğumuz feeds dosyasındaki PostsFeed ( sizinki nedir bilemem ) classını dahil edelim:</p>

<p><code class="highlighter-rouge">from .feeds import PostsFeed</code></p>

<p>Bu işlemi başarıyla yaptıysak bir URL eklemesi yapabiliriz:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="o">...</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^feed/$'</span><span class="p">,</span> <span class="n">PostsFeed</span><span class="p">()),</span>

<span class="p">]</span>
</code></pre>
</div>

<p>Artık feed çağrısı yapıldığında PostsFeed class’ı çalışacak ve içerikleri döndürecektir. Örneğin http://localhost/feed gibi düşünelim. Hatalı olduğum nokta var ise bildirmenizden memnuniyet duyarım. Kendimce aktarmaya çalıştım.</p>

</div>
<div class="comments">
  <h3>Yorumlar</h3>
  <div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://aligren.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                                
</div>

<!--<div class="related">
  <h2>İlişkili Yazılar</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/javascript-add-and-substract-days">
            JavaScript Add and Substract Days
            <small>02 Apr 2017</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/jquery-ile-tabloda-arama-yapmak">
            jQuery ile Tabloda Arama Yapmak
            <small>05 Mar 2017</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/javascript-currency-formatting">
            JavaScript Currency Formatting
            <small>17 Feb 2017</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>
-->
      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
  </body>
</html>
